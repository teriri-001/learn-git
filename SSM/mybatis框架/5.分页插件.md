##### 引入分页插件

**使用Maven**

普通SSM:

```xml
<dependency>
    <groupId>com.github.pagehelper</groupId>
    <artifactId>pagehelper</artifactId>
    <version>最新版本</version>
</dependency>
```

springBoot

```xml
<!-- spring-boot -->       
<dependency>
    <groupId>com.github.pagehelper</groupId>
    <artifactId>pagehelper-spring-boot-starter</artifactId>
    <version>1.2.10</version>
</dependency>
```



---

##### 配置拦截器插件

mybatis的拦截器在映射语句执行过程中进行拦截，新版拦截器是 `com.github.pagehelper.PageInterceptor`。

新建一个mabatis文件，在该目录下新建xml配置文件

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE configuration
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
    
    <!-- mybatis配置 -->
	<settings>
        <!-- 驼峰的自动映射 -->
        <setting name="mapUnderscoreToCamelCase" value="true" />
        <setting name="logImpl" value="STDOUT_LOGGING" />
    </settings>
    
    <plugins>
        <!-- 分页插件配置 -->
        <plugin interceptor="com.github.pagehelper.PageHelper">
            <!-- 必须指定，方言即实现分页时的逻辑 -->
            <property name="dialect" value="mysql" />
            <!-- 设置为true时，使用RowBounds分页会进行count查询 -->
            <property name="rowBoundsWithCount" value="true" />
        </plugin>
        
        <!-- 通用mapper配置 -->
        <plugin interceptor="com.github.abel533.mapperhelper.MapperInterceptor">
            <!--主键自增回写方法,默认值MYSQL,详细说明请看文档 -->
            <property name="IDENTITY" value="MYSQL" />
            <!--通用Mapper接口，多个通用接口用逗号隔开 -->
            <property name="mappers" value="com.github.abel533.mapper.Mapper" />
        </plugin>
    </plugins>
</configuration>
```

**全局配置**

```yaml
# 指定配置文件位置
mybatis:
  config-location: classpath:/mybatis/mybatis-config.xml
```



---

##### 使用插件进行分页

**使用 `pageHelper.startPage` 或 `PageHelper.offSetPage` 静态方法**

* 在需要进行分页的mybatis查询方法前调用，紧跟在这个方法后的第一个查询会被进行分页
* 分页时，返回结果list类型是page<E>，如果想取出分页信息，需要强制转换为Page<E> ，或者使用PageInfo类。

```java
// 分页
// 获取第1页，包含10条内容
PageHelper.startPage(1,10);
// 查询方法，第一个方法会被分页
List<Person> list = personMapper.select(id);

// 放入pageInfo中
pageInfo pageinfo = new PageInfo(list);
```

**获取pageInfo中需要的数据**

```java
// 新建page参数
page<person> pages = new Page<>(pageinfo.getPageNum(),pageinfo.getPageSize());
//设置记录条数
page.setTotal(pageinfo.getTotal());

// 结果，将page做参数
PageInfo<person> newPage = new pageInfo<>(page);

// 添加结果集
newPage.getList().add(list)
```

**pageInfo类**

```Java
private int pageNum;      //当前页的页码
private int pageSize;     //每页的数量
private int size;  

//当前页可以在页面中"显示startRow到endRow 共size条数据"

private int startRow; 	//当前页面第一个元素在数据库中的行号
private int endRow;		//当前页面最后一个元素在数据库中的行号

private long total;     //总记录数
private int pages;       //总页数
private List<T> list;      //结果集

private int prePage;    //上一页
private int nextPage;   //下一页

private boolean isFirstPage;   //是否为第一页
private boolean isLastPage;   //是否为最后一页
private boolean hasPreviousPage;       //是否有前一页
private boolean hasNextPage;          //是否有下一页

private int navigatePages;          //导航页码数
private int[] navigatepageNums;       //所有导航页号
private int navigateFirstPage;       //导航条上的第一页
private int navigateLastPage;     //导航条上的最后一页
```

