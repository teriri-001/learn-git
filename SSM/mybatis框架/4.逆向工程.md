# 逆向工程

1. 通过设计好的数据表，自动生成pojo、mapper、mapper.xml等
2. 该操作只针对于==单表==

## 逆向工程配置

1. 导入jar包：mybatis-generator-core-….jar

2. 编写MGB的配置文件

   ```xml
   <?xml version="1.0" encoding="UTF-8"?>
   <!DOCTYPE generatorConfiguration
           PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
           "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd">
   
   <generatorConfiguration>
       <!-- context：
           targetRuntime: 执行生成的逆向工程的版本
               MyBatis3Simple: 生成基本的CRUD
               MyBatis3: 生成带条件的CRUD
       -->
       <context id="DB2Tables" targetRuntime="MyBatis3">
           <!-- 设置连接数据库的信息 -->
           <jdbcConnection driverClass="com.mysql.jdbc.Driver"                  		connectionURL="jdbc:mysql://localhost:3306/test_mybatis"
                      userId="root"
                    password="root">
           </jdbcConnection>
   
           <javaTypeResolver >
               <property name="forceBigDecimals" value="false" />
           </javaTypeResolver>
   
           <!-- javabean的生成策略
   			targetPackage:生成的实体类存放路径，可以不存在
   			targetProject：生成在那个项目下，添加项目目录
   			enableSubPackages：是否能使用此包
   			trimStrings：是否对数据库查询结果使用trim操作
    		-->
           <javaModelGenerator targetPackage="com.oy.online.bean" targetProject=".\src">
               <property name="enableSubPackages" value="true" />
               <property name="trimStrings" value="true" />
           </javaModelGenerator>
   
   
           <!-- 映射文件的生成策略
    		-->
           <sqlMapGenerator targetPackage="com.oy.online.Mapper"  targetProject=".\config">
               <property name="enableSubPackages" value="true" />
           </sqlMapGenerator>
   
           <!-- mapper接口的生成策略 -->
           <javaClientGenerator type="XMLMAPPER" targetPackage="com.oy.online.Mapper"  targetProject=".\src">
               <property name="enableSubPackages" value="true" />
           </javaClientGenerator>
   
           <!-- 设置要将数据库中的哪张表逆向生成哪一个javabean
   			tableName：指定需要操作的表的名称
   			domainObjectName：对应实体类的名称
    		-->
           <table tableName="emp" domainObjectName="Emp"></table>
           <table tableName="dept" domainObjectName="Dept"></table>
   
       </context>
   </generatorConfiguration>
   ```

3. 运行代码生成器生成代码

   ```java
   @Test
   public void testMBG() throws Exception {
       List<String> warnings = new ArrayList<String>();
       boolean overwrite = true;
       File configFile = new File("mbg.xml");
       ConfigurationParser cp = new ConfigurationParser(warnings);
       Configuration config = cp.parseConfiguration(configFile);
       DefaultShellCallback callback = new DefaultShellCallback(overwrite);
       MyBatisGenerator myBatisGenerator = new MyBatisGenerator(config, callback, warnings);
       myBatisGenerator.generate(null);
   }
   ```

## QBC方式查询

1.    逆向工程可以通过example类的criteria接口操作数据库，该接口主要设置where之后的查询条件
2. 使用步骤
   1. 创建一个example对象
   2. 调用example对象的createCriteria（）方法创建一个Criteria对象
   3. 使用Criteria对象的方法编写查询条件
   4. 多个条件考虑使用多个Criteria对象查询后连接

