# 条件构造器

## crud方法

1. insert添加：使用基本crud方法添加

2. update修改

   1. update(entity,updatewrapper)：通过updatewrapper构造器更新实体

      ```Java
      // 将name=shimin的列更新为 age=18
      UpdateWrapper<User> updateWrapper = new UpdateWrapper<>();
      updateWrapper.eq("name","shimin");
      User user = new User();
      user.setAge(18);
      Integer rows = userdateMapper.update(user, updateWrapper);
      ```

3. delete删除

   1. delete(querywrapper)：删除querywrapper指定字段数据

4. select查询并分页

   1. selectList(querywrapper)：如果为Null，默认查询所有

   2. selectCount(querywrapper)：根据实体中的属性查询总数，查询条件使用等号

   3. selectPage(page，querywrapper)：**分页查询**

      ```Java
      // 设置当前页为变量curpage和页容量为每页3条
      Page<WatchKeeper> page = new Page<>(curpage,3);
      IPage<WatchKeeper> useripage = watchKeeperMapper.selectPage(page,queryWrapper);
      //获取当前页的数据getRecords()
      List<WatchKeeper> watchKeepers = useripage.getRecords();
      //获取总页数
      int page = useripage.getPages();
      //获取返回数据总条数
      int date = useripage.getTotal();
      ```

## 条件构造器查询方式

1. 常用方式汇总

   |                      查询方式                       |                             说明                             |                             演示                             |
   | :-------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
   |                        where                        |                WHERE 语句，拼接 + WHERE 条件                 |                                                              |
   |                         and                         |                 AND 语句，拼接 + AND 字段=值                 |                                                              |
   |                         or                          | OR 语句，拼接 + OR 字段=值 !!!主动调用or表示紧接着下一个方法不是用and连接!(不调用or则默认为使用and连接) | wrapper.It(“age”,40).or().isNotnull(“email”) //年龄小于40或邮箱不为空 |
   | allEq ( [condition] , Map( k , v ) , [null2IsNull]) |                      基于 map 内容等于                       | k为数据库字段名，v为字段值；null2IsNull为true时map中的值为空也进行is null比较；否则忽略null |
   |                         eq                          |                             等于                             |                      ne("name", "老王")                      |
   |                         ne                          |                            不等于                            |                                                              |
   |                         gt                          |                             大于                             |                                                              |
   |                         ge                          |                           大于等于                           |                                                              |
   |                         lt                          |                             小于                             |                                                              |
   |                         le                          |                           小于等于                           |                                                              |
   |                        like                         |                        模糊查询 like                         |  querywrapper.like(“name”,”雨“ )  //查询name中包含“雨”的行   |
   |                      likeLeft                       |                          LIKE ‘%值’                          |                                                              |
   |                      likeRight                      |                          LIKE ‘值%’                          |                                                              |
   |                       notLike                       |                      模糊查询 NOT LIKE                       |                                                              |
   |                         in                          |                      包含IN (v0, v1, …)                      | 比较的值可以是：in ( “age”, arrays.aslist( 1 ,2 ,3 ) ; 可以是： in("age", 1, 2, 3) ; 可以是：in ( “age”, {1,2,3}) |
   |                        notIn                        |                   不包含NOT IN (v0, v1, …)                   |                                                              |
   |                inSql( column , sql )                |                        IN ( sql语句 )                        | inSql("id", "select id from table where id < 3") //即 id in (select id from table where id < 3) |
   |                      notInSql                       |                   字段 NOT IN ( sql语句 )                    |                                                              |
   |                  isNull( column )                   |                         NULL 值查询                          |                                                              |
   |                      isNotNull                      |                         IS NOT NULL                          |                                                              |
   |                 groupBy( columns )                  |                       GROUP BY 字段, …                       |   groupBy("id", "name")·` --->` 对应SQL： group by id,name   |
   |                    having( sql )                    |                      HAVING ( sql语句 )                      |     having("sum(age) > 10") `--->` having sum(age) > 10      |
   |                  orderBy (columns)                  |                       ORDER BY 字段, …                       |                Colums字段越靠前排序优先级越高                |
   |                     orderByAsc                      |                           升序排序                           |                                                              |
   |                     orderByDesc                     |                           降序排序                           |                                                              |
   |           between ( column , var1,var2 )            |                       BETWEEN 条件语句                       |   between ( “age”, 18, 20)  //即查询age大于18而小于20的行    |
   |                     notBetween                      |                     NOT BETWEEN 条件语句                     |                                                              |
   |                        apply                        |                           拼接SQL                            |                                                              |
   |                  select( columns )                  |                         查询指定字段                         | querywrapper.select ( “age”,”name” ).likeRight( “name”,”王” ) //查询name中姓王的行，并只返回 age 、name字段 |

   

