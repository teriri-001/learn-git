# AR模式

1. 简介

   1. Active Record(活动记录)，是一种领域模型模式，特点是一个模型类对应关系型数据库中的一个表，而模型类的一个实例对应表中的一行记录。
   2. 简而言之，就是直接使用实体类操作数据库

2. 开启AR模式

   1. 让实体类继承Model类，并实现主键指定方法

      ```Java
      @Data
      public class User extends Model<User> {
          private Integer id;
          private String name;
          private Integer age;
          private Integer gender;
          //重写这个方法，return当前类的主键
          @Override
          protected Serializable pkVal() {
              return id;
          }
      }
      ```

   2. 创建mapper接口，虽然AR模式用不到该接口，但是一定要定义，否则使用AR时会报空指针异常

      ```Java
      public interface UserDao extends BaseMapper<User> {
      }
      ```

   3. 完成配置

3. 使用AR模式

   1. **用法与MP的BaseMapper提供的方法的用法差不多，只不过这里是实体对象调用,而不是用BaseMapper的接口子类**

   2. AR插入操作举例

      ```Java
      public void testArInsert(){
          	// 创建一个user对象并赋值
              User user = new User();
              user.setName("林青霞");
              user.setAge(22);
              user.setGender(1);
          	// 直接使用user对象调用MP的方法插入该对象,返回布尔值
              boolean result = user.insert();
              System.out.println(result);
          }
      ```

   3. AR更新操作举例

      ```Java
      public void testArUpdate(){
              User user = new User();
              user.setId(1);
              user.setName("刘亦菲");
              boolean result = user.updateById();
              System.out.println(result);
          }
      ```

      