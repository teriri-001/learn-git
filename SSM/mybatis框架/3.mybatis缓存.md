# mybatis缓存

1. 概述
   1. 使用缓存将在先在内存中查找相关数据，没有才向磁盘中查找，故而能提升效率
   2. mybatis系统默认定义了两级缓存
      1. 一级缓存默认开启，也称为本地缓存，是sqlsession级别的缓存
      2. 二级缓存需要手动开启和配置，是namespace级别的缓存，可以使用缓存接口cache自定义二级缓存

## 一级缓存

1. 作用域默认为sqlsession，即同一个SQL session对象中，使用了相同的查询语句，则第二个SQL会从缓存中取数据
2. session刷新或关闭后缓存被清除
3. 可以使用clearcache手动清除缓存
4. 失效情况
   1. 相同的两次查询期间执行了增删改的操作，会自动清空缓存

## 二级缓存

1. 全局作用域缓存
2. 开启二级缓存
   1. 全局配置文件设置\<setting name="cacheenabled" value="true"\>
   2. 需要使用二级缓存的映射文件使用\<cache/>开启
   3. 对应的pojo实体类需要实现serializable序列化接口
   4. 二级缓存需要sqlsession关闭或提交之后才会生效
3. cache相关属性
   1. eviction：缓存回收策略，默认LRU
   2. flushinterval：刷新间隔
   3. size：可缓存的引用数目
   4. readonly：只读缓存
   5. type：设置第三方缓存
4. 缓存常用属性
   1. usecache：select标签添加，可以设置该查询SQL是否使用二级缓存
   2. flashcache：SQL执行之后会清空一级和二级缓存

## 第三方缓存

1. 可以通过二级缓存的cache接口的type标签引入第三方缓存