# 注解开发

## spring注解开发

**配置文件**

​	添加context约束、开启注解支持、指定要扫描的包

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        <!-- 导入context约束-->
        http://www.springframework.org/schema/context
        https://www.springframework.org/schema/context/spring-context.xsd">

    <!-- 开启注解的支持-->
    <context:annotation-config/>
    
    <!--指定注解扫描包，该包下的注解就会生效-->
	<context:component-scan base-package="com.kuang.pojo"/>

</beans>
```

**代码编写**

1. 实体类编写

   ```Java
   @Component // 组件，代表将该类注册到IOC容器中，装配Bean
   public class User {
       @value("sinon") //属性注入
      public String name;
   }
   ```



**@component衍生注解**：与@component功能一致，用法不一样

1. **@Repository**：用于dao层（mapper层）

2. **@service**：用于service层

3. **@controller**：用于controller层

4. 可以在该类注解上添加名称如`@component("name")`，相当于自己设置Bean的id，获取时需要通过该id获取

   

**@scope（作用域）**

* singleton：单例模式
* prototype：原型模式

**总结**

* **XML与注解比较**
  * XML可以适用任何场景 ，结构清晰，维护方便
  * 注解不是自己提供的类使用不了，开发简单方便

## [javaconfig实现配置](https://www.jianshu.com/p/4aef4c93c633)

​	使用Java代码来配置spring，使得装配的过程也变得及其灵活。spring4之后成为核心功能，推荐使用该方式配置spring。且在springboot中广泛使用该方式

**代码编写**

1. 实体类代码

   ```java
   @component
   public class user{
   	private String name;
       // 假设存在一个对象属性
   	private persion persion;
       // get 、set方法
       .....
   }
   ```

2. javaconfig配置类代码

   ```Java
   @configuration // 标明这是一个配置类
   @componentScan // 可以显示的指定扫描那个包，也可以不写
   @Import(object.class) //可以引入其他配置类
   public class myconfig{
       @Bean //将一个类注册到IOC容器中，返回值对应Bean的class，类名对应Bean的id
       public user myuser{
    		// 可以直接返回一个对象，通过@value注解给普通类型赋值
           return new Dog();
           
           // 可以调用set方法赋值
           user obj = new user();
           // 普通类型注入
           obj.setName("sinon");
           // Bean对象注入
           obj.setPersion(new persion());
           return obj;
       }
   }
   ```

3. 代码测试

   ```Java
   @Test
   public void test2(){
       // 使用Java方式，需要使用AnnotationConfig上下文获取容器，通过配置类的class对象加载
      ApplicationContext applicationContext =new AnnotationConfigApplicationContext(MyConfig.class);
      Dog dog = (Dog) applicationContext.getBean("dog");
      System.out.println(dog.name);
   }
   ```

   





