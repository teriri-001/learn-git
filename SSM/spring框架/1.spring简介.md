# spring简介

	## 概述

​	spring目的在于减轻开发压力，本身是一个大杂烩，整合了各种技术框架



**优点**

* 控制反转（IOC），面向切面编程（AOP）

* 支持事务的处理

* 总结：spring就是一个轻量级的控制反转（IOC）和面向切面编程的框架

  

**[spring的组成和扩展](https://www.cnblogs.com/xiaobaizhiqian/p/7616453.html)**![](C:\Users\yangyim\Pictures\Saved Pictures\1219227-20170930225010356-45057485.gif)

* **spring core（核心容器）**：核心容器提供 Spring 框架的基本功能。核心容器的主要组件是 BeanFactory，它是工厂模式的实现。

* **spring context（上下文）**：Spring 上下文是一个配置文件，向 Spring 框架提供上下文信息。*本质上说就是一个维护Bean定义以及对象之间协作关系的高级接口*

* **spring AOP**：集成面向切面编程

  

**拓展**

**springboot与springcloud**

* Spring Boot 是 Spring 的一套快速配置脚手架，可以基于Spring Boot 快速开发单个微服务

* Spring Boot专注于快速、方便集成的单个微服务个体，Spring Cloud关注全局的服务治理框架

* Spring Boot使用了**约束优于配置的理念**

* springboot承上启下，是spring和springMVC的简化，是springcloud的基础

* Spring Cloud是基于Spring Boot实现的，**Spring Boot可以离开Spring Cloud独立使用开发项目**，**但是Spring Cloud离不开Spring Boot，属于依赖的关系**。

  

## IOC

1. **IOC理论**

   ​		IOC（控制反转），即将对象的创建权交给了spring，我们需要的对象由spring帮忙创建，然后供我们使用

   

   ​		IOC是一种设计思想，DI（依赖注入）是实现IOC的一种方法

2. **实现IOC**

   ​		**IOC是spring框架的核心内容**，可以使用xml配置文件配置，可以使用注解，甚至可以零配置（自动装配）实现IOC

   

   ​     Spring容器在初始化时先读取配置文件，根据配置文件或元数据创建将对象存入容器中，程序使用时再从Ioc容器中取出需要的对象

   

    	采用XML方式配置Bean的时候，Bean的定义信息是和实现分离的；而采用注解的方式可以把两者合为一体，Bean的定义信息直接以注解的形式定义在实现类中，从而达到了零配置的目的。

3. **IOC创建对象原理（xml方式）**

   ​	默认使用无参构造来创建对象

   * 通过有参构造方法来创建对象

     ```xml
     <!--有三种方法，使用比较好理解的一种-->
     <bean id="xxx",class="xxx">
         <!-- 
     		根据参数名字设置
     		多个参数可使用多条标签实现
      	-->
         <constructor-arg name="name",value="xxxx"/>
     </bean>
     ```

     

4. **总结**

   **控制反转是一种通过描述（XML或注解）并通过第三方去生产或获取特定对象的方式。在Spring中实现控制反转的是IoC容器，其实现方法是依赖注入（Dependency Injection,DI）**

## spring配置

1. **别名(alias)**：给bean对象取一个别名，不如name

   ```xml
   <!-- 存在一个bean -->
   <bean id = "user",class = "xxx"></bean>
   <!-- 给bean取别名 -->
   <alias name = "user" alias = "hello"/>
   ```

2. **bean配置**

   ```xml
   <!--
   	id: bean的唯一标识
   	class: bean对象所对应的全限定名
   	name: 别名
   	scope: 单例模式
   -->
   ```

3. **import配置**：一般用于团队开发，可以将多个配置文件合并为一个

   ```xml
   <import resource="{path}/beans.xml"/>
   ```

   



## spring hello程序

1. 新建Maven项目

2. **导入JAR包**

   ```xml
   <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-webmvc</artifactId>
      <version>5.2.0.RELEASE</version>
   </dependency>
   <dependency>
           <groupId>junit</groupId>
           <artifactId>junit</artifactId>
           <version>4.12</version>
   </dependency>
   ```

3. **编写代码**

   1. 编写hello实体类

      ```java
      public class hello{
          private String name;
          public String getName(){
              return name;
          }
          public void setName(String name){
              this.name = name;
          }
          public void show(){
             System.out.println("Hello,"+ name );
        }
      }
      ```

   2. 编写xml配置文件（xml方式）

      ```xml
      <?xml version="1.0" encoding="UTF-8"?>
      <beans xmlns="http://www.springframework.org/schema/beans"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://www.springframework.org/schema/beans
             http://www.springframework.org/schema/beans/spring-beans.xsd">
      
         <!--
      	bean就是java对象 , 由Spring创建和管理
      	原始创建对象：类型 变量名 = new 类型();
      
      	<bean>配置文件对应关系:
      	id：变量名
      	class：实体类的全限定名,相当于类型，通过反射方式在IOC中创建Bean，要求Bean中必须有无参数的构造器
      
      	<property>对应关系：相当与给属性赋值，借助set方法
      	name：属性名
       	value：属性值
      	ref：如果属性值也是一个bean，即spring容器中创建好的对象
      	-->
         <bean id="hello" class="com.kuang.pojo.Hello">
             <property name="name" value="Spring"/>
         </bean>
      
      </beans>
      ```

   3. 功能测试

      ```java
      public void test(){
       /**
       *创建Spring IOC容器对象，ApplicationContext表示容器，是一个接口
       *ClassPathXmlApplicationContext是ApplicationContext的一个实现类，用于   *获取xml配置文件
       *返回值需要为ApplicationContext类型
       */
         ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
         //根据id定位到IOC容器中的bean，获取到bean实例
         Hello hello = (Hello) context.getBean("hello");
         hello.show();
      }
      ```
      
   4. 总结：需求改动时，不需要再去改动程序，只需要修改配置文件即可

4. 调试/运行配置，解决项目的调试工具灰色问题

   * 选中edit configurations

     ![](C:\Users\yangyim\Pictures\snipaste\Snipaste_2020-09-17_17-29-26.jpg)

   * 配置调试/开发

     ![](C:\Users\yangyim\Pictures\snipaste\Snipaste_2020-09-17_17-29-52.jpg)

   5.配置Bean之后方法上没有小叶子的问题

   * 项目springTest上鼠标右键，选中open module setting![](C:\Users\yangyim\Pictures\snipaste\Snipaste_2020-09-17_17-41-18.jpg)
   * 选中modules下的spring![](C:\Users\yangyim\Pictures\snipaste\Snipaste_2020-09-17_17-41-44.jpg)
   * 点击右边加号，选中springTest即可![](C:\Users\yangyim\Pictures\snipaste\Snipaste_2020-09-17_17-42-53.jpg)

